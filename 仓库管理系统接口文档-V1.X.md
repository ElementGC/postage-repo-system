

# 仓库管理系统接口文档-V1.X

## 1. 用户相关接口

### 1.1 注册

#### 1.1.1 基本信息

>请求路径：` user/register`
>
>请求方式：Post
>
>接口描述：用于注册新用户，接口传入符合规范的数据后在后端进行分配空间，并返回结果

#### 1.1.2 请求参数

请求参数格式：`x-www-form-urlencoded`

参数说明：

| 参数名称 |  说明  |  类型  | 是否必须 | 其他要求                                 |
| :------: | :----: | :----: | :------: | :--------------------------------------- |
| username | 用户名 | String |    是    | 只能是英文字符与数字组合，长度为5-16字符 |
| password |  密码  | String |    是    | 只能是英文字符与数字组合，长度为5-16字符 |

> 若输入数据不符合要求则不允许点击注册

请求数据样例

```shell
username="Element"&password="Ele1234"
```

#### 1.1.3 相应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息                                       |
| ------- | ------ | -------- | ------ | --------------------- | ---------------------------------------------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |                                                |
| message | string | 非必须   |        | 提示信息              | 出现失败时，返回失败原因（如用户名已被注册等） |
| data    | object | 非必须   |        | 返回的数据            |                                                |

响应数据样例：

```json
{
    "code": 0,
    "message": "注册成功",
    "data": null
}
{
    "code": 1,
    "message": "注册失败，用户名已被注册",
    "data": null
}
```

#### 1.1.4 备注说明

注册成功后，保留注册的用户名信息，跳转到登录界面但是清空密码



### 1.2 登录

#### 1.2.1 基本信息

> 请求路径：` user/login`
>
> 请求方式：Post
>
> 接口描述：用于登录，将用户名与加密后的密码与数据库中的用户名与密码进行比对，若能对应上则返回令牌作为请求头

#### 1.2.2 请求参数

请求参数格式：`x-www-form-urlencoded`

请求参数说明：

| 参数名称 |  说明  |  类型  | 是否必须 | 备注                                     |
| -------- | :----: | :----: | :------: | ---------------------------------------- |
| username | 用户名 | String |    是    | 只能是英文字符与数字组合，长度为5-16字符 |
| password |  密码  | String |    是    | 只能是英文字符与数字组合，长度为5-16字符 |

请求数据样例：

```shell
username="Element" && password="Ele1234"
```



#### 1.2.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息                                           |
| ------- | ------ | -------- | ------ | --------------------- | -------------------------------------------------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |                                                    |
| message | string | 非必须   |        | 提示信息              | 出现失败时，返回失败原因（如用户名与密码不匹配等） |
| data    | string | 必须     |        | 返回的数据,`jwt`令牌  |                                                    |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGFpbXMiOnsiaWQiOjUsInVzZXJuYW1lIjoid2FuZ2JhIn0sImV4cCI6MTY5MzcxNTk3OH0.pE_RATcoF7Nm9KEp9eC3CzcBbKWAFOL0IsuMNjnZ95M"
}
```



#### 1.2.4 备注说明

> 用户登录成功后，系统会自动下发`JWT（Json Web Token）`令牌，然后在后续的每次请求中，浏览器都需要在请求头header中携带到服务端，请求头的名称为` Authorization`，值为登录时下发的`JWT`令牌。
>
> 后续进入其他页面时，如果检测到用户未登录，则`http`响应状态码为`401`，并返回到登录页面



### 1.3 获取用户详细信息

#### 1.3.1 基本信息

> 请求路径：`/ user/info`
>
> 请求方式：Get
>
> 接口描述：该接口用于通过请求头获取当前已登录用户的详细信息，并返回保存到前端

#### 1.3.2 请求参数

无

#### 1.3.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称          | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息                                                     |
| ------------- | ------ | -------- | ------ | --------------------- | ------------------------------------------------------------ |
| code          | number | 必须     |        | 响应码, 0-成功,1-失败 |                                                              |
| message       | String | 非必须   |        | 提示信息              |                                                              |
| data          | object | 必须     |        | 返回的数据            |                                                              |
| \|-id         | number | 非必须   |        | 主键ID                | `id`为用户编号，同样保存在数据库中但不能由用户决定，用户登录后的后续相关查询都使用`id`进行 |
| \|-username   | String | 非必须   |        | 用户名                |                                                              |
| \|-email      | String | 非必须   |        | 邮箱                  |                                                              |
| \|-userAva    | String | 非必须   |        | 头像地址              |                                                              |
| \|-createTime | String | 非必须   |        | 创建时间              |                                                              |
| \|-updateTime | String | 非必须   |        | 更新时间              |                                                              |
| \|-phone      | String | 非必须   |        | 手机号码              |                                                              |



响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": {
        "id": 5,
        "userName": "Element",
        "phone": "",
        "email": "",
        "userAva": "",
        "createTime": "2023-09-02 22:21:31",
        "updateTime": "2023-09-02 22:21:31"
    }
}
```

#### 1.3.4 备注说明

> 并不是所有信息都要返回，对于后端中的用户类，其`password`属性（即密码）出于安全性考虑就不需要返回了



### 1.4 用户基本信息更新

#### 1.4.1 基本信息

> 请求路径：`/ user/update`
>
> 请求方式：Put
>
> 接口描述：该接口用于更新已登录用户的基本信息(除头像和密码)

#### 1.4.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注                                         |
| -------- | ------ | ------ | -------- | -------------------------------------------- |
| id       | 主键ID | number | 是       | 这一项需要在前端设置不可更改，仅作为信息展示 |
| username | 用户名 | String | 否       | 这一项需要在前端设置不可更改，仅作为信息展示 |
| email    | 邮箱   | String | 是       | 满足邮箱的格式                               |
| phone    | 电话   | String | 是       |                                              |

请求数据样例：

```shell
{
    "id":10086
    "username":"Element",
    "email":"Ele.@njupt.edu.cn"
    "phone":"1008611"
}
```

#### 1.4.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```

#### 1.4.4 备注说明

> 用户可以自己更改的信息相当于是只有 email 和 phone 其余信息如注册时间、用户名、用户编号（id）都不能进行更改



### 1.5 更新用户头像

#### 1.5.1 基本信息

> 请求路径：`/ user/ava-update`
>
> 请求方式：Patch
>
> 接口描述：该接口用于更新已登录用户的头像

#### 1.5.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称  | 说明     | 类型   | 是否必须 | 备注                                      |
| --------- | -------- | ------ | -------- | ----------------------------------------- |
| avatarUrl | 头像地址 | string | 是       | 新头像的url地址（试试看能不能上传本地图） |

请求数据样例：

```shell
avatarUrl=
https://big-event-gwd.oss-cn-beijing.aliyuncs.com/9bf1cf5b-1420-4c1b-91ad-e0f4631cbed4.png
```

#### 1.5.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 1.6 更新用户密码

#### 1.6.1 基本信息

> 请求路径：` user/pwd-update`
>
> 请求方式：PATCH
>
> 接口描述：该接口用于更新已登录用户的密码

#### 1.6.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称 | 说明       | 类型   | 是否必须 | 备注                                 |
| -------- | ---------- | ------ | -------- | ------------------------------------ |
| old_pwd  | 原密码     | string | 是       |                                      |
| new_pwd  | 新密码     | string | 是       | 旧密码不能与新密码相同，前端规则判断 |
| re_pwd   | 确认新密码 | string | 是       | 两次密码必须相同，前端规则判断       |

请求数据样例：

```json
{
    "old_pwd":"123456",
    "new_pwd":"234567",
    "re_pwd":"234567"
}
```

#### 1.6.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```

#### 1.6.4 备注说明

> 完成修改密码后，自动跳转回登录页面，并取消原本的令牌



## 2. 商品分类相关接口

### 2.1 新增商品分类

#### 2.1.1 基本信息

> 请求路径：`/type`
>
> 请求方式：Post
>
> 接口描述：该接口用于新增商品分类

#### 2.1.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称  | 说明     | 类型   | 是否必须 | 备注                                   |
| --------- | -------- | ------ | -------- | -------------------------------------- |
| typeName  | 分类名称 | string | 是       | 对于已经存在的分类，需要及时识别并报错 |
| typeAlias | 分类别名 | string | 是       |                                        |

请求数据样例：

```json
{
    "typeName":"生活用品",
    "typeAlias":"shyp"
}
```

#### 2.1.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 2.2 商品分类列表

#### 2.2.1 基本信息

> 请求路径：`/type`
>
> 请求方式：Get
>
> 接口描述：该接口用于获取当前的所有商品分类

#### 2.2.2 请求参数

无

#### 2.2.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称          | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------------- | ------ | -------- | ------ | --------------------- | -------- |
| code          | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message       | string | 非必须   |        | 提示信息              |          |
| data          | array  | 必须     |        | 返回的数据            |          |
| \|-id         | number | 非必须   |        | 主键ID                |          |
| \|-typeName   | string | 非必须   |        | 分类名称              |          |
| \|-typeAlias  | string | 非必须   |        | 分类别名              |          |
| \|-createTime | string | 非必须   |        | 创建时间              |          |
| \|-updateTime | string | 非必须   |        | 修改时间              |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": [
        {
            "id": 3,
            "typeName": "美食",
            "typeAlias": "ms",
            "createTime": "2023-09-02 12:06:59",
            "updateTime": "2023-09-02 12:06:59"
        },
        {
            "id": 4,
            "typeName": "书籍",
            "typeAlias": "sj",
            "createTime": "2023-09-02 12:08:16",
            "updateTime": "2023-09-02 12:08:16"
        },
        {
            "id": 5,
            "typeName": "体育",
            "typeAlias": "ty",
            "createTime": "2023-09-02 12:08:33",
            "updateTime": "2023-09-02 12:08:33"
        }
    ]
}
```



### 2.3 获取商品分类详情

#### 2.3.1 基本信息

> 请求路径：/type/detail
>
> 请求方式：Get
>
> 接口描述：该接口用于根据ID获取s商品分类详情

#### 2.3.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=6
```

#### 2.3.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称             | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ---------------- | ------ | -------- | ------ | --------------------- | -------- |
| code             | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message          | string | 非必须   |        | 提示信息              |          |
| data             | object | 必须     |        | 返回的数据            |          |
| \|-id            | number | 非必须   |        | 主键ID                |          |
| \|-categoryName  | string | 非必须   |        | 分类名称              |          |
| \|-categoryAlias | string | 非必须   |        | 分类别名              |          |
| \|-createTime    | string | 非必须   |        | 创建时间              |          |
| \|-updateTime    | string | 非必须   |        | 修改时间              |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": {
        "id": 6,
        "categoryName": "风土人情",
        "categoryAlias": "ftrq",
        "createTime": "2023-09-03 11:07:13",
        "updateTime": "2023-09-03 11:13:39"
    }
}
```

> 理论上来说只要在上一个接口获取了所有商品的信息，那就可以直接按照获取的信息展现，没必要在这里再调用一次接口



### 2.4 更新商品分类

#### 2.4.1 基本信息

> 请求路径：`/type`
>
> 请求方式：Put
>
> 接口描述：该接口用于更新商品分类

#### 2.4.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称  | 说明     | 类型   | 是否必须 | 备注 |
| --------- | -------- | ------ | -------- | ---- |
| id        | 主键ID   | number | 是       |      |
| typeName  | 分类名称 | string | 是       |      |
| typeAlias | 分类别名 | string | 是       |      |

请求数据样例：

```json
{
    "id":1,
    "typeName":"书籍",
    "typeAlias":"book"
}
```

#### 2.4.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 2.5 删除商品分类

#### 2.5.1 基本信息

> 请求路径：`/type`
>
> 请求方式：Delete
>
> 接口描述：该接口用于根据ID删除商品分类

#### 2.5.2 请求参数

请求参数格式：queryString

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=6
```

#### 2.5.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```





## 3. 仓库管理相关接口

### 3.1 添加商品

#### 3.1.1 基本信息

> 请求路径：`/ good`
>
> 请求方式：Post
>
> 接口描述：通过这个接口将新进货的货物信息添加进入数据库，添加商品和入库分开进行

#### 3.1.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称    | 说明         | 类型   | 是否必须 | 备注                                   |
| ----------- | ------------ | ------ | -------- | -------------------------------------- |
| goodName    | 商品名称     | string | 是       | 1~10个非空字符                         |
| goodCode    | 商品条码编号 | string | 是       | 唯一指向商品的属性，                   |
| description | 商品详细信息 | string | 否       | 最多100字                              |
| unit        | 数量单位     | string | 否       |                                        |
| typeId      | 商品类型编号 | number | 是       | 前端做一个可选框出来，只能从几个中选择 |

请求数据样例：

```json
{
    "goodName": "固体胶",
    "goodCode": "10100021",
    "description": "得力固体胶，中号",
    "unit": "盒",
    "typeId": "3",
}
```

#### 3.1.3 相应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息                         |
| ------- | ------ | -------- | ------ | --------------------- | -------------------------------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |                                  |
| message | string | 非必须   |        | 提示信息              | 若存在相同条形码，报错商品已存在 |
| data    | object | 非必须   |        | 返回的数据            |                                  |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```



### 3.2 商品列表(条件分页)

#### 3.2.1 基本信息

> 请求路径：`/ good`
>
> 请求方式：Get
>
> 接口描述：该接口用于根据商品分类条件查询商品，带分页，若无条件则按照更新时间由近到远排序

#### 3.2.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明       | 类型   | 是否必须 | 备注         |
| -------- | ---------- | ------ | -------- | ------------ |
| pageNum  | 当前页码   | number | 是       |              |
| pageSize | 每页条数   | number | 是       |              |
| typeId   | 商品分类ID | number | 否       |              |
| goodName | 商品名     | String | 否       | 不能模糊搜索 |

请求数据样例：

```shell
pageNum=1&pageSize=5&typeId=2&goodName="固体胶"
```

#### 3.2.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称                 | 类型   | 是否必须 | 备注                   | 其他信息                  |
| -------------------- | ------ | -------- | ---------------------- | ------------------------- |
| code                 | number | 必须     | 响应                   | 0-成功,1-失败             |
| message              | string | 非必须   | 提示信息               |                           |
| data                 | object | 必须     | 返回的数据             |                           |
| \|-total             | number | 必须     | 总记录数               | 若总数为0，则显示其他内容 |
| \|-items             | array  | 必须     | 数据列表               |                           |
| \|\|-id              | number | 非必须   | 主键ID                 | 便于索引，不显示          |
| \|\|-goodName        | string | 非必须   | 商品名称               |                           |
| \|\|-goodCode        | number | 非必须   | 商品条形码             |                           |
| \|\|-description     | string | 非必须   | 商品描述               |                           |
| \|\|-number          | number | 非必须   | 当前库存数量           |                           |
| \|\|-unit            | string | 非必须   | 数量单位               |                           |
| \|\|-typeName        | number | 非必须   | 商品分类               |                           |
| \|\|-firstInTime     | string | 非必须   | 商品首次入库时间       |                           |
| \|\|-recentAlterTime | string | 非必须   | 商品最近发生变动的时间 |                           |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": {
        "total": 1,
        "items": [
            {
                "id": 3,
                "goodName": "固体胶",
                "goodCode": 10100021,
                "description": "得力固体胶，中号",
                "number": 100,
                "unit": "盒",
                "typeName": "学习用品",
                "typeId": 2,
                "firstInTime": "2023-09-03 11:55:30",
                "recentAlterTime": "2023-09-03 11:55:30",
            }
        ]
    }
}
```

#### 3.2.4 备注说明

> 通过这个接口我们可以获取到符合条件的所有商品信息，但是不完全展示出来，可以通过前端在这一页设置点击弹窗，从而显示出商品详细信息
>
> 在执行这部分的后端程序时，我们有些筛选条件可能会用上、可能用不上，较为完善的方法就是使用映射配置文件进行条件筛选，这一步需要使用到实体类 `PageBean` 与`mybatis`的 `PageHelper`结合使用，这里直接使用的人家提供的代码





### 3.3 入库、出库

#### 3.3.1 基本信息

> 请求路径：`/ good/alter`
>
> 请求方式：Put
>
> 接口描述：该接口用于根据ID对商品数量信息进行更新

#### 3.3.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称 | 说明       | 类型   | 是否必须 | 备注                     |
| -------- | ---------- | ------ | -------- | ------------------------ |
| goodName | 商品名     | string | 是       | 在前端进行商品和id的匹配 |
| alterNum | 变动的数量 | number | 是       |                          |
| state    | 操作情况   | num    | 是       | 1 - 入库\|-1 - 出库      |

请求数据样例：

```shell
{
    "goodName":"good4",
    "alterNum":3,
    "type":-1
}
```

#### 3.3.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
 {
     "code": 0,
     "message": "操作成功",
     "data": null
 }
```



### 3.4 商品信息更新

#### 3.4.1 基本信息

> 请求路径：`/ good/update`
>
> 请求方式：Put
>
> 接口描述：该接口用于根据ID对商品其他信息（名称、条形码、种类、描述、计量单位等）进行更新

#### 3.3.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称    | 说明     | 类型   | 是否必须 | 备注                                                     |
| ----------- | -------- | ------ | -------- | -------------------------------------------------------- |
| id          | 主键ID   | number | 是       |                                                          |
| goodName    | 商品名   | string | 是       | 由于商品名和条码都可以更改，因此需要一开始就对id进行绑定 |
| goodCode    | 商品条码 | string | 是       |                                                          |
| description | 商品描述 | string | 否       |                                                          |
| unit        | 商品单位 | string | 否       |                                                          |
| typeId      | 商品种类 | number | 是       | 数据表 good 中 仅存放typeId                              |

请求数据样例：

```shell
{
	"id": 4,
    "goodName": "固体胶",
    "goodCode": 10100021,
    "description": "得力固体胶，中号",
    "unit": "盒",
    "typeId": "3",
}
```

#### 3.3.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息                       |
| ------- | ------ | -------- | ------ | --------------------- | ------------------------------ |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |                                |
| message | string | 非必须   |        | 提示信息              | 如商品名已存在、条形码已存在等 |
| data    | object | 非必须   |        | 返回的数据            |                                |

响应数据样例：

```json
 {
     "code": 0,
     "message": "操作成功",
     "data": null
 }
```



### 3.5 出、入库记录

#### 3.5.1 基本信息

> 请求路径：`/ good/record`
>
> 请求方式：Get
>
> 接口描述：该接口用于获取商品的出入库记录列表，添加和删除商品的操作不进行记录

#### 3.5.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明                     | 类型   | 是否必须 | 备注 |
| -------- | ------------------------ | ------ | -------- | ---- |
| pageNum  | 当前页码                 | number | 是       |      |
| pageSize | 每页条数                 | number | 是       |      |
| goodName | 对指定商品的记录进行搜索 | string | 否       |      |

请求数据样例：

```shell
pageNum=1&pageSize=5&goodName='good1'
```

#### 3.5.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称           | 类型   | 是否必须 | 备注                  | 其他信息                       |
| -------------- | ------ | -------- | --------------------- | ------------------------------ |
| code           | number | 必须     | 响应码, 0-成功,1-失败 |                                |
| message        | string | 非必须   | 提示信息              | 如商品名已存在、条形码已存在等 |
| data           | object | 必须     | 返回的数据            |                                |
| \|-total       | number | 必须     | 总的记录数            | 若总数为0，则显示其他内容      |
| \|-items       | object | 非必须   | 数据列表              |                                |
| \|\|-id        | number | 非必须   | 主键ID                |                                |
| \|\|-good      | number | 非必须   | 对应的商品id          |                                |
| \|\|-goodName  | string | 非必须   | 商品名称              |                                |
| \|\|-goodCode  | string | 非必须   | 商品条码              |                                |
| \|\|-type      | number | 非必须   | 操作种类              | 0  入库\| 1  出库              |
| \|\|-alterTime | string | 非必须   | 操作发生时间          |                                |
| \|\|-alterNum  | number | 非必须   | 操作的商品数量        |                                |

响应数据样例：

```json
 {
     "code": 0,
     "message": "操作成功",
     "data":{
        "total": 1,
        "items": {
             "id": 4,
             "goodName": "xxx",
             "goodCode": "XXX123",
             "type": 0,
             "alterTime": "2023-12-10 10:24",
             "alterNum": 10
         }
     }
 }
```



### 3.6 删除商品

#### 3.6.1 基本信息

> 请求路径：`/good`
>
> 请求方式：Delete
>
> 接口描述：该接口用于根据ID删除商品

#### 2.5.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=6
```

#### 2.5.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```







## 4. 用户自定义报警规则

> 预警规则的设置，即设置仓库内存在商品数量在多少以下，或是多于多少时发出警报
>
> 在进入商品管理界面时跳出弹窗显示出不符合规则的商品名，以及当前数量、所不满足的规则
>
> 理想的话可以在关闭弹窗之后仍然对不满足规则的表单项标红

### 4.1 添加规则

#### 4.1.1 基本信息

> 请求路径：`/good/rule`
>
> 请求方式：Post
>
> 接口描述：该接口用于新增预警规则

#### 4.1.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称        | 说明               | 类型   | 是否必须 | 备注                         |
| --------------- | ------------------ | ------ | -------- | ---------------------------- |
| maxNum          | 最大预警数量       | int    | 否       | 最大数量最小数量至少选择一个 |
| minNum          | 最小预警数量       | int    | 否       |                              |
| relatedGoodName | 规则所关联的商品名 | string | 否       |                              |
| relatedTypeId   | 规则所关联的分类ID | int    | 否       | 通过下拉框直接确认ID         |
| state           | 规则所关联的对象   | int    | 是       | 0 - 商品 \| 1-分类           |

请求数据样例：

```json
{
	"maxNum": 100,
    "minNum": 10,
    "relatedGoodName": "good1",
    "state": "0"
}
```

#### 4.1.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 必须     |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "规则添加成功",
    "data": null
}
```



### 4.2 获取规则信息

#### 4.2.1 基本信息

> 请求路径：`/good/rule`
>
> 请求方式：Get
>
> 接口描述：该接口用于新增预警规则

#### 4.2.2 请求参数

无

#### 4.2.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称               | 类型   | 是否必须 | 备注                             |
| ------------------ | ------ | -------- | -------------------------------- |
| code               | number | 必须     | 响应码, 0-成功,1-失败            |
| message            | string | 必须     | 提示信息                         |
| data               | object | 必须     | 返回的数据                       |
| \|-id              | number | 非必须   | 主键ID                           |
| \|-state           | number | 非必须   | 规则状态：0-商品规则，1-分类规则 |
| \|-relatedGoodId   | number | 非必须   | 与商品规则相关联的商品ID         |
| \|-relatedGoodName | string | 非必须   | 与商品规则相关联的商品名         |
| \|-relatedTypeId   | number | 非必须   | 与分类规则相关联的分类ID         |
| \|-relatedTypeName | string | 非必须   | 与分类规则相关联的分类名         |
| \|-maxNum          | number | 非必须   | 规则设置预警最大值               |
| \|-minNum          | number | 非必须   | 规则设置预警最小值               |
| \|-createTime      | number | 非必须   | 规则创建时间                     |
| \|-updateTime      | number | 非必须   | 规则更新时间                     |

响应数据样例：

```json
{
    "code": 0,
    "message": "规则获取成功",
    "data": [
        {
            "id": 3,
            "state": 0,
            "relatedGoodId": 10,
            "relatedGoodName": "good1",
            "relatedTypeId": null,
            "relatedTypeId": null,
            "maxNum":100,
            "minNum":null,
            "createTime": "2023-09-02 12:06:59",
            "updateTime": "2023-09-02 12:06:59"
        },
		{
            "id": 4,
            "state": 1,
            "relatedGoodId": null,
            "relatedGoodName": null,
            "relatedTypeId": 0,
            "relatedTypeId": 未分类,
            "maxNum":null,
            "minNum":10,
            "createTime": "2023-09-02 12:06:59",
            "updateTime": "2023-09-02 12:06:59"
        },
    ]
}
```



### 4.3 更新规则

#### 4.3.1 基本信息

> 请求路径：`/good/rule`
>
> 请求方式：Put
>
> 接口描述：该接口用于更新规则信息，更新规则不能更改其状态（即是 *商品规则* 还是 *分类规则* ）只能更新指定规则的同类型指定的对象，最大数量、最小数量，所以也就不需要回传状态参数了

#### 4.3.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称        | 说明               | 类型   | 是否必须 | 备注                   |
| --------------- | ------------------ | ------ | -------- | ---------------------- |
| id              | 主键ID             | number | 是       |                        |
| maxNum          | 分类名称           | number | 否       | 二者至少有一个         |
| minNum          | 分类别名           | string | 否       |                        |
| relatedGoodName | 规则所关联的商品名 | string | 否       | 根据stated的状态，必填 |
| relatedTypeId   | 规则所关联的分类ID | int    | 否       | 通过下拉框直接确认ID   |

请求数据样例：

```json
{
    "id":20,
    "maxNum": 100,
    "minNum": 5,
    "relatedGoodName": "good1",
    "relatedTypeId": null
}
```

#### 4.3.3 响应数据

响应数据类型：application/json

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "规则更新成功",
    "data": null
}
```



### 4.4 删除规则

#### 4.4.1 基本信息

> 请求路径：`/good/rule`
>
> 请求方式：Delete
>
> 接口描述：该接口用于根据ID删除规则

#### 4.4.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=21
```

#### 4.4.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": null
}
```





## 5.数据分析

### 5.1 添加需求数据

#### 5.1.1 基本信息

> 请求路径：`/statistics`
>
> 请求方式：Post
>
> 接口描述：用户在前端数据商品名以及近**六个月**的需求数据，通过该接口存储到数据库中

#### 5.1.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称 | 说明         | 类型   | 是否必须 | 备注                  |
| -------- | ------------ | ------ | -------- | --------------------- |
| goodName | 需求的商品   | string | 是       |                       |
| julN     | 7月需求数据  | number | 否       | 若传入值为空则自动赋0 |
| augN     | 8月需求数据  | number | 否       |                       |
| septN    | 9月需求数据  | number | 否       |                       |
| octN     | 10月需求数据 | number | 否       |                       |
| novN     | 11月需求数据 | number | 否       |                       |
| decN     | 12月需求数据 | number | 否       |                       |

请求数据样例：

```json
{
    "goodName": "good1",
    "julN": 100,
    "augN": 100,
    "sepN": 100,
    "octN": 100,
    "novN": 100,
    "decN": 100
}
```



#### 5.1.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "添加需求数据成功",
    "data": null
}
```



### 5.2 获取需求数据

#### 5.2.1 基本信息

> 请求路径：`/statistics`
>
> 请求方式：Get
>
> 接口描述：从后端获取所有商品的所有需求数据

#### 5.2.2 请求参数

无

#### 5.2.3 相应数据

响应数据类型：`application/json`

响应参数说明：

| 名称        | 类型   | 是否必须 | 备注                  | 其他信息 |
| ----------- | ------ | -------- | --------------------- | -------- |
| code        | number | 必须     | 响应码, 0-成功,1-失败 |          |
| message     | string | 非必须   | 提示信息              |          |
| data        | object | 必须     | 返回的数据            |          |
| \| id       | number | 必须     |                       |          |
| \| goodName | string | 必须     |                       |          |
| \| julN     | number | 必须     |                       |          |
| \| augN     | number | 必须     |                       |          |
| \| sepN     | number | 必须     |                       |          |
| \| octN     | number | 必须     |                       |          |
| \| novN     | number | 必须     |                       |          |
| \| decN     | number | 必须     |                       |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "操作成功",
    "data": [
        {
            "id": 1,
            "goodName": "good1",
            "julN": 100,
            "augN": 100,
            "sepN": 100,
            "octN": 100,
            "novN": 100,
            "decN": 100,
        },
         {
            "id": 2,
            "goodName": "good2",
            "julN": 100,
            "augN": 100,
            "sepN": 100,
            "octN": 100,
            "novN": 100,
            "decN": 100,
        },
    ]
}
```





### 5.3 更新需求数据

#### 5.3.1 基本信息

> 请求路径：`\statistics`
>
> 请求方式：Put
>
> 接口描述：前端传递出更新后的信息以及对应的id，交给后端通过id修改对应的数据

#### 5.3.2 请求参数

请求参数格式：`application/json`

请求参数说明：

| 参数名称 | 说明           | 类型   | 是否必须 | 备注                             |
| -------- | -------------- | ------ | -------- | -------------------------------- |
| id       | 需求数据的主键 | number | 是       | 商品名无法更改，只能重新新建一个 |
| julN     | 7月需求数据    | number | 否       | 若传入值为空则自动赋0            |
| augN     | 8月需求数据    | number | 否       |                                  |
| septN    | 9月需求数据    | number | 否       |                                  |
| octN     | 10月需求数据   | number | 否       |                                  |
| novN     | 11月需求数据   | number | 否       |                                  |
| decN     | 12月需求数据   | number | 否       |                                  |

请求数据样例：

```json
{
    "id": 1,
    "julN": 100,
    "augN": 100,
    "sepN": 100,
    "octN": 100,
    "novN": 100,
    "decN": 100
}
```



#### 5.3.4 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "更新需求数据成功",
    "data": null
}
```



### 5.4 删除需求数据

#### 5.4.1 基本信息

> 请求路径：`/statistics`
>
> 请求方式：Delete
>
> 接口描述：通过传入需要删除的数据的 id 将数据库中的对应需求数据删除

#### 5.4.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=1
```

#### 5.4.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称    | 类型   | 是否必须 | 默认值 | 备注                  | 其他信息 |
| ------- | ------ | -------- | ------ | --------------------- | -------- |
| code    | number | 必须     |        | 响应码, 0-成功,1-失败 |          |
| message | string | 非必须   |        | 提示信息              |          |
| data    | object | 非必须   |        | 返回的数据            |          |

响应数据样例：

```json
{
    "code": 0,
    "message": "删除需求数据成功",
    "data": null
}
```



### 5.5 预测需求数据

#### 5.5.1 基本信息

> 请求路径：`/statistics/predict`
>
> 请求方式：Get
>
> 接口描述：通过接口传入需求数据在数据库中的id，随后获取完整的需求数据并对其进行线性回归预测

#### 5.5.2 请求参数

请求参数格式：`queryString`

请求参数说明：

| 参数名称 | 说明   | 类型   | 是否必须 | 备注 |
| -------- | ------ | ------ | -------- | ---- |
| id       | 主键ID | number | 是       |      |

请求数据样例：

```shell
id=1
```

#### 5.4.3 响应数据

响应数据类型：`application/json`

响应参数说明：

| 名称        | 类型   | 是否必须 | 默认值 | 备注                  |
| ----------- | ------ | -------- | ------ | --------------------- |
| code        | number | 必须     |        | 响应码, 0-成功,1-失败 |
| message     | string | 非必须   |        | 提示信息              |
| data        | object | 非必须   |        | 返回的数据            |
| \| id       | number | 必须     |        |                       |
| \| goodName | string | 必须     |        |                       |
| \| julN     | number | 必须     |        |                       |
| \| augN     | number | 必须     |        |                       |
| \| sepN     | number | 必须     |        |                       |
| \| octN     | number | 必须     |        |                       |
| \| novN     | number | 必须     |        |                       |
| \| decN     | number | 必须     |        |                       |
| \| preN     | number | 必须     |        | 预测出的数据          |

响应数据样例：

```json
{
    "code": 0,
    "message": "删除需求数据成功",
    "data": 
    {
        "id": 1,
        "goodName": "good1",
        "julN": 100,
        "augN": 100,
        "sepN": 100,
        "octN": 100,
        "novN": 100,
        "decN": 100,
        "preN": 100
    },
}
```





